<div class="character-list">
  <div class="header-section">
    <h2>{{ 'character.characters' | translate }}</h2>
    <div class="upload-section">
      <div 
        class="drop-zone compact"
        [class.dragging]="isDragging"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)">
        <input
          type="file"
          id="xml-file-input"
          accept=".xml,text/xml,application/xml"
          (change)="onFileSelected($event)"
        />
        <label for="xml-file-input" class="file-upload-label-compact">
          <span class="upload-icon">ðŸ“„</span>
          <span *ngIf="!selectedFile">{{ 'character.uploadXml' | translate }}</span>
          <span *ngIf="selectedFile" class="file-name-compact">{{ selectedFile.name }}</span>
        </label>
        <button 
          *ngIf="selectedFile" 
          (click)="clearFileSelection()" 
          class="btn-clear-compact"
          [title]="'character.clearFile' | translate">
          âœ•
        </button>
        <button
          *ngIf="selectedFile"
          (click)="uploadCharacter()"
          [disabled]="uploading"
          class="btn-upload-compact"
          [title]="'character.uploadCharacter' | translate">
          <span *ngIf="!uploading">âœ“</span>
          <span *ngIf="uploading">...</span>
        </button>
      </div>
      <div *ngIf="uploadError" class="upload-error-compact">
        {{ uploadError }}
      </div>
    </div>
  </div>
  
  <div *ngIf="loading" class="loading">{{ 'character.loadingCharacters' | translate }}</div>
  
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="loadCharacters()">{{ 'common.retry' | translate }}</button>
  </div>
  
  <div *ngIf="!loading && !error">
    <div *ngIf="characters.length === 0" class="empty">
      <p>{{ 'character.noCharactersUpload' | translate }}</p>
    </div>
    
    <div *ngIf="characters.length > 0" class="characters-grid">
      <app-character-card 
        *ngFor="let character of characters" 
        [character]="character"
        [showExpandButton]="true"
        (characterUpdated)="onCharacterUpdated($event)">
      </app-character-card>
    </div>
  </div>
</div>
